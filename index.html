<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SDLC — Sistema de Reservas de Hotel</title>
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <style>
    :root{
      /* Paleta monocroma minimalista (Grazia style) */
      --bg:#0A0A0A;           /* fondo negro profundo */
      --bg2:#0A0A0A;          /* igual para evitar parches */
      --panel:#0E0E0E;        /* paneles/tarjetas */
      --panel2:#0E0E0E;       /* paneles */
      --ink:#FFFFFF;          /* texto principal blanco */
      --muted:#FFFFFF;        /* texto secundario (solicitado: todo blanco) */
      --line:#1F1F1F;         /* bordes sutiles */
      --sdlc:#FFFFFF;         /* acento blanco (monocromo) */
      --stlc:#FFFFFF;         /* acento blanco (monocromo) */
      --accent:#D1D5DB;       /* gris claro para focos */
      --glow:none;            /* sin brillos */
      --radius:12px
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto;
      background:var(--bg);
      color:var(--ink)
    }
    header{
      background:rgba(0,0,0,.85); backdrop-filter:saturate(120%);
      border-bottom:1px solid var(--line); position:sticky; top:0; z-index:10
    }
    .wrap{max-width:1100px; margin:0 auto; padding:14px 20px}
    .title{display:flex; gap:12px; align-items:center; flex-wrap:wrap}
    .title h1{margin:0; font-size:clamp(20px,3.2vw,30px)}
    .chip{padding:4px 8px; border-radius:var(--radius); font-size:12px; color:var(--ink); font-weight:600; border:1px solid var(--line); background:transparent}
    .chip.sdlc{border-color:#2E2E2E}
    .chip.hint{color:var(--muted)}
    .sub{color:var(--muted); font-size:14px}

    /* Timeline (solo SDLC) */
    .timeline{max-width:1100px; margin:20px auto; display:grid; gap:14px; padding:0 20px}
    .card{
      position:relative; cursor:pointer;
      background:var(--panel);
      border:1px solid var(--line); border-radius:var(--radius);
      padding:16px 16px 12px; box-shadow:var(--glow);
      transition:transform .15s ease, border-color .2s ease
    }
    .card:hover{transform:translateY(-1px); border-color:#2E2E2E}
    .card.is-open{border-color:#2E2E2E}
    .card::before{display:none}
    .card h3{margin:0 0 6px 0; font-size:18px; line-height:1.25}
    .card p{margin:0; color:var(--ink); line-height:1.5}
    .actions{margin-top:10px; display:flex; gap:10px; flex-wrap:wrap}
    .btn{
      appearance:none; border:1px solid var(--line); background:transparent; color:var(--ink);
      border-radius:var(--radius); padding:10px 12px; font-weight:600; cursor:pointer; min-height:40px; letter-spacing:.2px
    }
    .btn:hover{border-color:#3A3A3A; background:#111}
    .btn:focus-visible{outline:2px solid var(--accent); outline-offset:2px}

    /* Expansor (animado con GSAP; sin transición CSS para evitar choques) */
    .expand{overflow:clip; height:0}
    .expand.open{height:auto}
    .inner{border-top:1px solid var(--line); margin-top:12px; padding-top:12px}
    .grid{display:grid; grid-template-columns:1.1fr .9fr; gap:14px}
    .panel{background:var(--panel); border:1px solid var(--line); border-radius:var(--radius); padding:12px}
    .panel h4{margin:0 0 6px 0; font-size:14px; color:var(--ink)}
    .list{margin:.2rem 0 0 1.1rem; color:var(--ink)}

    /* STLC chips/cards */
    .pills{display:grid; grid-template-columns:repeat(auto-fit, minmax(220px, 1fr)); gap:10px}
    .pill{
      display:inline-flex; gap:8px; align-items:center; justify-content:center; width:100%;
      background:transparent; border:1px solid var(--line);
      color:var(--ink); padding:10px 12px; border-radius:var(--radius); font-size:14px; font-weight:600; cursor:pointer; min-height:40px;
      transition:transform .1s ease, background-color .15s ease, border-color .15s ease
    }
    .pill:hover{transform:translateY(-1px); background:#111; border-color:#3A3A3A}
    .pill:focus-visible{outline:2px solid var(--accent); outline-offset:2px}
    .pill .dot{display:none}

    /* Modal STLC detalle */
    .modal{position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:20}
    .modal.show{display:flex}
    .backdrop{position:absolute; inset:0; background:rgba(0,0,0,.55)}
    .dialog{
      position:relative; background:var(--panel);
      border:1px solid var(--line); border-radius:var(--radius); max-width:720px; width:92%;
      padding:18px 18px 22px; max-height:90vh; overflow:auto; box-shadow:none
    }
    .close{
      position:absolute; right:12px; top:10px; cursor:pointer;
      background:transparent; border:1px solid var(--line); color:var(--ink);
      border-radius:var(--radius); font-size:14px; padding:6px 9px
    }
    .tag{display:inline-block; padding:4px 8px; border-radius:var(--radius); font-size:12px; color:var(--ink); border:1px solid var(--line); background:transparent; font-weight:700}
    .kpis{display:grid; grid-template-columns:repeat(2,1fr); gap:10px; margin-top:10px}
    .kpi{background:var(--panel); border:1px solid var(--line); border-radius:var(--radius); padding:10px}
    .kpi strong{display:block; color:var(--ink); font-size:12px}
    .kpi span{font-size:13px; color:var(--ink)}

    @media (max-width:900px){ .grid{grid-template-columns:1fr} }
  </style>
</head>
<body>
  <header>
    <div class="wrap title">
      <h1>SDLC — Sistema de Reservas de Hotel</h1>
      <span class="chip sdlc">SDLC</span>
      <span class="chip hint">STLC aparece al seleccionar</span>
    </div>
  </header>

  <main>
    <div class="wrap">
      <p class="sub">Explora cada fase del ciclo de vida del desarrollo de software (SDLC) y descubre cómo se aplica el aseguramiento de calidad en un sistema de reservas de hotel. Haz clic en cada tarjeta para ver detalles y las fases del ciclo de vida de pruebas (STLC) relacionadas.</p>
    </div>

    <section class="timeline" id="timeline"></section>
  </main>

  <!-- Modal STLC -->
  <div class="modal" id="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-hidden="true">
    <div class="backdrop" data-close></div>
    <div class="dialog">
      <button class="close" data-close>Cerrar ✕</button>
      <span class="tag">STLC</span>
      <h3 id="modalTitle" style="margin:.4rem 0 .3rem; color:#FFFFFF">&nbsp;</h3>
      <p id="modalDesc" style="color:#FFFFFF">&nbsp;</p>
      <div class="kpis" id="modalKpis"></div>
      <div style="margin-top:12px">
        <strong style="font-size:12px; color:#334155">Aplicado al hotel:</strong>
        <ul id="modalList" class="list"></ul>
      </div>
    </div>
  </div>

  <script>
  // Inicializar AOS (config estándar y discreta)
  AOS.init({
    once: true,
    offset: 24,
    duration: 500,
    easing: 'ease-out-cubic'
  });

  // ---------- Datos SDLC (hotel) ----------
  const SDLC = [
    {
      id:'s-req', title:'1. Análisis de Requisitos',
      desc:'Fase crucial donde definimos QUÉ debe hacer el sistema de reservas y cómo mediremos su calidad.',
      hotel:[
        'Definimos historias de usuario clave: búsqueda de habitaciones, proceso de reserva, gestión de pagos y políticas de cancelación.',
        'Establecemos reglas de negocio: tipos de habitación, gestión de temporadas, límites de ocupación, política de no overbooking.',
        'Especificamos requisitos no funcionales: tiempo de respuesta < 2s, cifrado de datos de pago, logs de auditoría completos.'
      ],
      related:['t-plan','t-analysis','t-design']
    },
    {
      id:'s-design', title:'2. Diseño del Sistema',
      desc:'Fase donde transformamos los requisitos en una arquitectura testeable y mantenible.',
      hotel:[
        'Diseñamos el modelo de datos: Reserva (status, fechas), Cliente (datos personales), Habitación (tipo, amenities), Tarifa (temporada, precios), Pago (método, estado).',
        'Definimos APIs RESTful con documentación OpenAPI: endpoints para búsqueda, reserva, pagos y notificaciones.',
        'Creamos wireframes interactivos: flujo de reserva para clientes y panel administrativo para el personal del hotel.'
      ],
      related:['t-analysis','t-design']
    },
    {
      id:'s-dev', title:'3. Implementación',
      desc:'Fase de construcción con enfoque en calidad desde el código.',
      hotel:[
        'Desarrollamos motor de disponibilidad en tiempo real con caché y validaciones.',
        'Implementamos integración con pasarela de pagos en ambiente sandbox para pruebas seguras.',
        'Configuramos feature toggles para control de releases: activación gradual de nuevas funcionalidades.'
      ],
      related:['t-env']
    },
    {
      id:'s-test', title:'4. Pruebas en SDLC',
      desc:'Fase de validación integral para garantizar calidad y confiabilidad.',
      hotel:[
        'Automatizamos flujo completo: búsqueda de habitación → selección → pago → confirmación por email.',
        'Validamos reglas críticas: cancelaciones con/sin cargo, políticas de no-show, restricciones de ocupación.',
        'Ejecutamos pruebas de seguridad (inyección SQL, XSS) y performance (500 reservas/hora en temporada alta).'
      ],
      related:['t-exec']
    },
    {
      id:'s-deploy', title:'5. Despliegue',
      desc:'Fase de transición a producción con verificaciones de calidad.',
      hotel:[
        'Ejecutamos migración de datos: carga inicial de habitaciones, tarifas y configuraciones.',
        'Implementamos monitoreo: alertas de errores críticos, métricas de tiempo de respuesta.',
        'Preparamos plan de contingencia: procedimientos de rollback verificados en ambiente de staging.'
      ],
      related:['t-close']
    },
    {
      id:'s-maint', title:'6. Mantenimiento',
      desc:'Fase continua de mejora y aseguramiento de calidad.',
      hotel:[
        'Añadimos nuevas funcionalidades: sistema de promociones, integración con agencias de viaje online.',
        'Realizamos actualizaciones de seguridad y optimizaciones de rendimiento.',
        'Ejecutamos pruebas de regresión automatizadas en cada actualización.'
      ],
      related:['t-exec']
    }
  ];

  // ---------- Datos STLC enriquecidos ----------
  const STLC = [
    {
      id:'t-plan', title:'1. Planificación de Pruebas',
      desc:'Primera fase donde diseñamos la estrategia de calidad y definimos CÓMO probaremos el sistema.',
      kpis:[
        ['Estrategia', '100% funcionalidades críticas cubiertas'],
        ['Riesgo', 'Matriz de riesgos priorizada y mitigada']
      ],
      hotel:[
        'Definimos plan maestro: pruebas unitarias, integración, E2E, seguridad y performance.',
        'Establecemos criterios de aceptación detallados para cada historia de usuario.',
        'Preparamos plan de pruebas de carga: 500 reservas/hora en temporada alta.'
      ]
    },
    {
      id:'t-analysis', title:'2. Análisis de Pruebas',
      desc:'Fase donde estudiamos a fondo los requisitos para identificar QUÉ probar exactamente.',
      kpis:[
        ['Trazabilidad', 'Matriz requisito → casos de prueba'],
        ['Prioridad', 'Clasificación por riesgo e impacto']
      ],
      hotel:[
        'Analizamos escenarios de disponibilidad: fechas, capacidad, tipos de habitación.',
        'Detallamos condiciones de cancelación: plazos, penalizaciones, reembolsos.',
        'Identificamos puntos críticos: concurrencia en reservas, timeout en pagos.'
      ]
    },
    {
      id:'t-design', title:'3. Diseño de Casos',
      desc:'Fase creativa donde desarrollamos el CÓMO probar cada funcionalidad.',
      kpis:[
        ['Calidad', 'Casos independientes y reutilizables'],
        ['Cobertura', '100% flujos críticos cubiertos']
      ],
      hotel:[
        'Diseñamos casos positivos: reserva exitosa, pago completado, cancelación a tiempo.',
        'Preparamos casos negativos: habitación no disponible, pago rechazado, cancelación tardía.',
        'Definimos datos de prueba: habitaciones (single, double, suite), tarifas por temporada.'
      ]
    },
    {
      id:'t-env', title:'4. Configuración del Entorno',
      desc:'Fase técnica donde preparamos DÓNDE ejecutaremos las pruebas.',
      kpis:[
        ['Disponibilidad', 'Ambiente QA 99.9% operativo'],
        ['Datos', 'Dataset completo y actualizado']
      ],
      hotel:[
        'Configuramos ambiente de pruebas: réplica exacta de producción.',
        'Integramos sandbox de pagos: tarjetas de prueba, simulación de errores.',
        'Configuramos servidor SMTP de pruebas para verificar notificaciones.'
      ]
    },
    {
      id:'t-exec', title:'5. Ejecución de Pruebas',
      desc:'Fase operativa donde validamos CADA ASPECTO del sistema.',
      kpis:[
        ['Efectividad', '95% pass rate en pruebas'],
        ['Defectos', '0 críticos pendientes']
      ],
      hotel:[
        'Ejecutamos suite completa: búsqueda → reserva → pago → email.',
        'Verificamos reglas de negocio: overbooking, políticas de cancelación.',
        'Validamos experiencia de usuario: flujo intuitivo, mensajes claros.'
      ]
    },
    {
      id:'t-close', title:'6. Cierre de Pruebas',
      desc:'Fase final donde evaluamos RESULTADOS y tomamos decisiones.',
      kpis:[
        ['Cobertura', '100% requisitos verificados'],
        ['Calidad', 'Métricas dentro de objetivos']
      ],
      hotel:[
        'Generamos dashboard de métricas: casos ejecutados, defectos, cobertura.',
        'Documentamos lecciones aprendidas y recomendaciones.',
        'Emitimos decisión GO/NO-GO basada en evidencia de calidad.'
      ]
    }
  ];

  // ---------- Render SDLC + expansor (card completa clickable) ----------
  const timeline = document.getElementById('timeline');

  function render(){
    timeline.innerHTML = SDLC.map((p, i)=>{
      return `
        <article class="card" id="${p.id}" role="button" tabindex="0" aria-expanded="false" aria-label="${p.title}" data-aos="fade" data-aos-duration="500" data-aos-easing="ease-out-cubic" data-aos-delay="${i * 80}">
          <h3>${p.title}</h3>
          <p>${p.desc}</p>
          <div class="actions"><button class="btn" data-expand="${p.id}">Explorar detalles y fases de prueba relacionadas</button></div>
          <div class="expand" id="exp-${p.id}">
            <div class="inner">
              <div class="grid">
                <div class="panel">
                  <h4>Aplicado al hotel</h4>
                  <ul class="list">${p.hotel.map(i=>`<li>${i}</li>`).join('')}</ul>
                </div>
                <div class="panel">
                  <h4>Fases STLC pertinentes</h4>
                  <div class="pills">${p.related.map(r=>{
                    const st = STLC.find(x=>x.id===r);
                    return `<button class=\"pill\" data-stlc=\"${st.id}\"><span class=\"dot\"></span>${st.title}</button>`
                  }).join('')}</div>
                </div>
              </div>
            </div>
          </div>
        </article>`
    }).join('');
  }
  render();
  // Refrescar AOS tras inyección dinámica
  if(window.AOS && typeof AOS.refreshHard === 'function'){
    AOS.refreshHard();
  } else if(window.AOS && typeof AOS.refresh === 'function'){
    AOS.refresh();
  }

  // Toggle expanders with smooth height animation + aria + state class
  function toggleExpand(id){
    const card = document.getElementById(id);
    const exp = document.getElementById('exp-'+id);
    if(!exp || !card) return;
    const opening = !exp.classList.contains('open');
    
    if(opening){
      // Abrir expansor
      exp.classList.add('open');
      exp.style.height = '0px';
      
      // Animar apertura con GSAP
      gsap.to(exp, {
        height: exp.scrollHeight,
        duration: 0.5,
        ease: 'power2.out',
        onComplete: () => {
          exp.style.height = 'auto';
          
          // Animar contenido interno
          gsap.from(exp.querySelectorAll('.panel'), {
            y: 20,
            opacity: 0,
            duration: 0.4,
            stagger: 0.1,
            ease: 'power2.out'
          });
          
          gsap.from(exp.querySelectorAll('.pill'), {
            scale: 0.8,
            opacity: 0,
            duration: 0.3,
            stagger: 0.05,
            ease: 'back.out(1.7)'
          });
        }
      });
    } else {
      // Animar cierre
      gsap.to(exp.querySelectorAll('.panel, .pill'), {
        opacity: 0,
        y: -10,
        duration: 0.2,
        ease: 'power1.in'
      });
      
      gsap.to(exp, {
        height: 0,
        duration: 0.4,
        ease: 'power2.inOut',
        delay: 0.1,
        onComplete: () => {
          exp.classList.remove('open');
          exp.style.height = '';
          // Resetear estilos para próxima apertura
          gsap.set(exp.querySelectorAll('.panel, .pill'), {clearProps: 'all'});
        }
      });
    }
    
    card.classList.toggle('is-open', opening);
    card.setAttribute('aria-expanded', String(opening));
  }

  // Eventos de interacción
  document.addEventListener('click', (e)=>{
    const pill = e.target.closest('[data-stlc]');
    if(pill){
      const st = STLC.find(x=>x.id===pill.dataset.stlc);
      if(st) openSTLCModal(st);
      return; // no colapsar
    }
    const btn = e.target.closest('[data-expand]');
    if(btn){ toggleExpand(btn.dataset.expand); return; }
    const card = e.target.closest('.card');
    if(card){ toggleExpand(card.id); }
    if(e.target.matches('[data-close]')) closeModal();
  });

  document.addEventListener('keydown', (e)=>{
    const card = document.activeElement?.classList?.contains('card') ? document.activeElement : null;
    if(card && (e.key==='Enter' || e.key===' ')){
      e.preventDefault(); toggleExpand(card.id);
    }
    if(e.key==='Escape') closeModal();
  });

  // ---------- Modal STLC ----------
  const modal = document.getElementById('modal');
  const modalTitle = document.getElementById('modalTitle');
  const modalDesc = document.getElementById('modalDesc');
  const modalKpis = document.getElementById('modalKpis');
  const modalList = document.getElementById('modalList');

  function openSTLCModal(st){
    modalTitle.textContent = st.title;
    modalDesc.textContent = st.desc;
    modalKpis.innerHTML = '';
    for(const [k,v] of (st.kpis||[])){
      const d = document.createElement('div'); d.className='kpi'; d.innerHTML = `<strong>${k}</strong><span>${v}</span>`; modalKpis.appendChild(d);
    }
    modalList.innerHTML = (st.hotel||[]).map(i=>`<li>${i}</li>`).join('');
    
    // Mostrar modal con animación
    modal.classList.add('show');
    modal.setAttribute('aria-hidden','false');
    
    // Animar elementos del modal
    const dlg = modal.querySelector('.dialog');
    const kpis = modal.querySelectorAll('.kpi');
    const items = modal.querySelectorAll('.list li');

    gsap.fromTo(dlg, {y: 24, opacity: 0}, {duration: 0.45, y: 0, opacity: 1, ease: 'power2.out'});
    
    gsap.fromTo(kpis, {y: 10, opacity: 0}, {duration: 0.3, y: 0, opacity: 1, stagger: 0.08, ease: 'power2.out', delay: 0.1});
    
    gsap.fromTo(items, {x: -10, opacity: 0}, {duration: 0.25, x: 0, opacity: 1, stagger: 0.05, ease: 'power1.out', delay: 0.2});
  }
  
  function closeModal(){ 
    const dlg = modal.querySelector('.dialog');
    gsap.to(dlg, {duration: 0.22, y: 12, opacity: 0, ease: 'power1.in', onComplete: () => {
      modal.classList.remove('show');
      modal.setAttribute('aria-hidden','true');
      gsap.set(dlg, {clearProps: 'all'});
    }});
  }
  </script>
</body>
</html>
